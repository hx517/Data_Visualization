//JS Bin// source https://jsbin.com/sabitu
//https://gist.github.com/hx517/e0c15dd79b3e03ecde57c087c0d8a126

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <script src="https://serv.cusp.nyu.edu/~hvo/files/nyc_grads.js" type="text/javascript"></script>
</head>
<body>
<div id="chart">
</div>
<script id="jsbin-javascript">
function processing (item) {
  var D = item.DroppedOut / item.Total
  var A = item.Advanced / item.Total
  var yr = item.Cohort
  return [A,D,yr]
}
var selected = grads.filter(function(record) {
	return record.Cohort == "2002" ||
           record.Cohort == "2004" ||
           record.Cohort == "2006";
}).slice(0,15);
var results = selected.map(processing);

var chart = document.getElementById("chart");
function addElementSVG(parent, name, props={}) {
  let svgNamespace = "http://www.w3.org/2000/svg";
  var element = 
document.createElementNS(svgNamespace, name);
  for (var key in props) {
    element.setAttributeNS(null, key, props[key]);
  }
  parent.appendChild(element);
  return element;
}
var canvas = addElementSVG(chart, "svg", {
  "width": "350",
  "height": "350",
  "style": "background-color: lightgrey;"
});

addElementSVG(canvas, "rect", 
              {"x":55, "y":40, 
               "width":245, "height":220,
               "fill":"white", 
               });

title = {"2002":"SteelBlue", "2004":"SeaGreen", "2006":"IndianRed"};
addElementSVG(canvas, 
              "text", {"x":40, "y":25}).textContent = 
  "NYC High School Graduate Statistics"

results.forEach(function(d, i){
 var circle = addElementSVG(canvas, "circle", {
 "cx":d[0]*1000, "cy":300-d[1]*1000, r:"5", 
   "stroke":"black", "stroke-width":"2",
   "fill": title[d[2]],});});


addElementSVG(canvas, "rect", 
              {"x":210, "y":45, 
               "width":85, "height":75,
               "fill":"darkgrey","stroke":"black", 
               "stroke-width":"1",});
addElementSVG(canvas, "rect", 
              {"x":220, "y":50, 
               "width":15, "height":15,
               "fill":"SteelBlue","stroke":"black", 
               "stroke-width":"0.5",});
addElementSVG(canvas, "rect", 
              {"x":220, "y":75, 
               "width":15, "height":15,
               "fill":"SeaGreen","stroke":"black", 
               "stroke-width":"0.5",});
addElementSVG(canvas, "rect", 
              {"x":220, "y":100, 
               "width":15, "height":15,
               "fill":"IndianRed","stroke":"black", 
               "stroke-width":"0.5",});


addElementSVG(canvas, "text", 
              {"x":250, "y":65}).textContent = "2002";
addElementSVG(canvas, "text", 
              {"x":250, "y":89}).textContent = "2004";
addElementSVG(canvas, "text", 
              {"x":250, "y":113}).textContent = "2006";

addElementSVG(canvas, "line", 
              {"x1":55, "y1":260, "x2":300, "y2": 260, "stroke":"black", 
               "stroke-width":"1",}); //drawing x axis

addElementSVG(canvas, "line", 
              {"x1":55, "y1":40, "x2":55, "y2": 260, "stroke":"black", 
               "stroke-width":"1",}); //drawing y axis
addElementSVG(canvas, "text", 
              {"x":100, "y":300}).textContent = "Advanced Regents(%)";//add x axis label
addElementSVG(canvas, "text", 
              {"x":-200, "y":20, "transform":"rotate(-90)"}).textContent = 
  "Dropped Out(%)"; // add y axis label


for (i = 0; i < 5; i++) {
    addElementSVG(canvas, "line", 
              {"x1":50, "y1":230 -i*36, "x2":55, "y2": 230 -i*36, "stroke":"black", 
               "stroke-width":"1",}); 
  addElementSVG(canvas, "text", 
              {"x":23, "y":233-i*36, "font-size":12}).textContent = 5*(i+1)+"%";
}//drawing y ticks

for (i = 0; i < 5; i++) {
addElementSVG(canvas, "line", 
              {"x1":61+i*50, "y1":267, "x2":61+i*50, "y2": 260, "stroke":"black", 
               "stroke-width":"0.8",}); 
  addElementSVG(canvas, "text", 
              {"x":53+i*50, "y":276, "font-size":12}).textContent = 5*(i+1)+"%";
}//drawing x ticks
</script>



<script id="jsbin-source-javascript" type="text/javascript">function processing (item) {
  var D = item.DroppedOut / item.Total
  var A = item.Advanced / item.Total
  var yr = item.Cohort
  return [A,D,yr]
}
var selected = grads.filter(function(record) {
	return record.Cohort == "2002" ||
           record.Cohort == "2004" ||
           record.Cohort == "2006";
}).slice(0,15);
var results = selected.map(processing);

var chart = document.getElementById("chart");
function addElementSVG(parent, name, props={}) {
  let svgNamespace = "http://www.w3.org/2000/svg";
  var element = 
document.createElementNS(svgNamespace, name);
  for (var key in props) {
    element.setAttributeNS(null, key, props[key]);
  }
  parent.appendChild(element);
  return element;
}
var canvas = addElementSVG(chart, "svg", {
  "width": "350",
  "height": "350",
  "style": "background-color: lightgrey;"
});

addElementSVG(canvas, "rect", 
              {"x":55, "y":40, 
               "width":245, "height":220,
               "fill":"white", 
               });

title = {"2002":"SteelBlue", "2004":"SeaGreen", "2006":"IndianRed"};
addElementSVG(canvas, 
              "text", {"x":40, "y":25}).textContent = 
  "NYC High School Graduate Statistics"

results.forEach(function(d, i){
 var circle = addElementSVG(canvas, "circle", {
 "cx":d[0]*1000, "cy":300-d[1]*1000, r:"5", 
   "stroke":"black", "stroke-width":"2",
   "fill": title[d[2]],});});


addElementSVG(canvas, "rect", 
              {"x":210, "y":45, 
               "width":85, "height":75,
               "fill":"darkgrey","stroke":"black", 
               "stroke-width":"1",});
addElementSVG(canvas, "rect", 
              {"x":220, "y":50, 
               "width":15, "height":15,
               "fill":"SteelBlue","stroke":"black", 
               "stroke-width":"0.5",});
addElementSVG(canvas, "rect", 
              {"x":220, "y":75, 
               "width":15, "height":15,
               "fill":"SeaGreen","stroke":"black", 
               "stroke-width":"0.5",});
addElementSVG(canvas, "rect", 
              {"x":220, "y":100, 
               "width":15, "height":15,
               "fill":"IndianRed","stroke":"black", 
               "stroke-width":"0.5",});


addElementSVG(canvas, "text", 
              {"x":250, "y":65}).textContent = "2002";
addElementSVG(canvas, "text", 
              {"x":250, "y":89}).textContent = "2004";
addElementSVG(canvas, "text", 
              {"x":250, "y":113}).textContent = "2006";

addElementSVG(canvas, "line", 
              {"x1":55, "y1":260, "x2":300, "y2": 260, "stroke":"black", 
               "stroke-width":"1",}); //drawing x axis

addElementSVG(canvas, "line", 
              {"x1":55, "y1":40, "x2":55, "y2": 260, "stroke":"black", 
               "stroke-width":"1",}); //drawing y axis
addElementSVG(canvas, "text", 
              {"x":100, "y":300}).textContent = "Advanced Regents(%)";//add x axis label
addElementSVG(canvas, "text", 
              {"x":-200, "y":20, "transform":"rotate(-90)"}).textContent = 
  "Dropped Out(%)"; // add y axis label


for (i = 0; i < 5; i++) {
    addElementSVG(canvas, "line", 
              {"x1":50, "y1":230 -i*36, "x2":55, "y2": 230 -i*36, "stroke":"black", 
               "stroke-width":"1",}); 
  addElementSVG(canvas, "text", 
              {"x":23, "y":233-i*36, "font-size":12}).textContent = 5*(i+1)+"%";
}//drawing y ticks

for (i = 0; i < 5; i++) {
addElementSVG(canvas, "line", 
              {"x1":61+i*50, "y1":267, "x2":61+i*50, "y2": 260, "stroke":"black", 
               "stroke-width":"0.8",}); 
  addElementSVG(canvas, "text", 
              {"x":53+i*50, "y":276, "font-size":12}).textContent = 5*(i+1)+"%";
}//drawing x ticks
</script></body>
</html>
